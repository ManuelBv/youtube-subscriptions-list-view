function t(){try{return"true"===localStorage.getItem("yt-list-view-enabled")}catch(t){return!1}}function e(t){try{localStorage.setItem("yt-list-view-enabled",t?"true":"false")}catch(t){console.warn("Failed to save list view preference")}}function i(t,e=5e3){return new Promise((i,o)=>{if(document.querySelector(t))return i(document.querySelector(t));const n=new MutationObserver(()=>{const e=document.querySelector(t);e&&(n.disconnect(),i(e))});n.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{n.disconnect(),o(new Error(`Timeout waiting for ${t}`))},e)})}function o(t){t.querySelectorAll("a.yt-lockup-metadata-view-model__title, a.yt-lockup-view-model__content-image").forEach(t=>{t.href&&t.href.includes("/watch?v=")&&(t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer"))})}const n=".yt-list-view-toggle{margin-left:16px;padding:8px 16px;background:rgba(255,255,255,0.1);border:1px solid rgba(255,255,255,0.2);border-radius:18px;color:#fff;cursor:pointer;font-size:14px;font-weight:500;transition:all 0.2s ease;display:inline-flex;align-items:center;gap:8px;vertical-align:middle;}.yt-list-view-toggle:hover{background:rgba(255,255,255,0.15);border-color:rgba(255,255,255,0.3);}.yt-list-view-toggle.active{background:#3ea6ff;border-color:#3ea6ff;}.yt-list-view-enabled ytd-rich-grid-renderer #contents{display:flex !important;flex-direction:column !important;gap:0 !important;}.yt-list-view-enabled ytd-rich-item-renderer{width:100% !important;max-width:100% !important;margin:0 !important;}.yt-list-view-enabled .yt-lockup-view-model.yt-lockup-view-model--vertical{display:flex !important;flex-direction:row !important;align-items:flex-start !important;gap:12px !important;padding:12px 0 !important;border-bottom:1px solid rgba(255,255,255,0.1) !important;}.yt-list-view-enabled a.yt-lockup-view-model__content-image{display:none !important;}.yt-list-view-enabled .yt-lockup-view-model__metadata{display:flex !important;flex-direction:row !important;align-items:flex-start !important;gap:12px !important;flex:1 !important;min-width:0 !important;}.yt-list-view-enabled .yt-lockup-metadata-view-model__avatar{flex-shrink:0 !important;}.yt-list-view-enabled yt-avatar-shape,.yt-list-view-enabled .yt-spec-avatar-shape{width:48px !important;height:48px !important;}.yt-list-view-enabled .yt-spec-avatar-shape__image{width:48px !important;height:48px !important;}.yt-list-view-enabled .yt-lockup-metadata-view-model__text-container{flex:1 !important;min-width:0 !important;}.yt-list-view-enabled .yt-lockup-metadata-view-model__title{font-size:14px !important;line-height:1.4 !important;margin-bottom:4px !important;display:block !important;}.yt-list-view-enabled .yt-lockup-metadata-view-model__title span{-webkit-line-clamp:2 !important;display:-webkit-box !important;-webkit-box-orient:vertical !important;overflow:hidden !important;}.yt-list-view-enabled yt-content-metadata-view-model{font-size:12px !important;}.yt-list-view-enabled .yt-content-metadata-view-model__metadata-text{font-size:12px !important;color:#aaa !important;}.yt-list-view-enabled .yt-lockup-metadata-view-model__menu-button{flex-shrink:0 !important;margin-left:auto !important;}.yt-list-view-enabled .yt-lockup-view-model--rich-grid-legacy-margin{margin:0 !important;}.yt-list-view-enabled .yt-lockup-metadata-view-model{flex-direction:row !important;}.yt-list-view-enabled ytd-rich-section-renderer{width:100% !important;}.yt-list-view-enabled ytd-rich-shelf-renderer[is-shorts]{width:100% !important;}.yt-list-view-enabled ytd-rich-shelf-renderer[is-shorts] #contents{display:flex !important;flex-direction:column !important;gap:0 !important;transform:none !important;}.yt-list-view-enabled ytd-rich-shelf-renderer[is-shorts] ytd-rich-item-renderer{width:100% !important;max-width:100% !important;margin:0 !important;}.yt-list-view-enabled ytm-shorts-lockup-view-model-v2,.yt-list-view-enabled ytm-shorts-lockup-view-model{display:flex !important;flex-direction:row !important;align-items:center !important;gap:12px !important;width:100% !important;}.yt-list-view-enabled ytm-shorts-lockup-view-model .shortsLockupViewModelHostThumbnailParentContainer{width:36px !important;height:48px !important;min-width:36px !important;flex-shrink:0 !important;}.yt-list-view-enabled ytm-shorts-lockup-view-model yt-thumbnail-view-model{width:36px !important;height:48px !important;}.yt-list-view-enabled ytm-shorts-lockup-view-model yt-thumbnail-view-model img{width:36px !important;height:48px !important;object-fit:cover !important;}.yt-list-view-enabled ytm-shorts-lockup-view-model .shortsLockupViewModelHostOutsideMetadata{flex:1 !important;display:flex !important;flex-direction:row !important;align-items:center !important;justify-content:space-between !important;padding:12px 0 !important;border-bottom:1px solid rgba(255,255,255,0.1) !important;}.yt-list-view-enabled ytm-shorts-lockup-view-model .shortsLockupViewModelHostMetadataTitle{font-size:14px !important;line-height:1.4 !important;margin-bottom:2px !important;}.yt-list-view-enabled ytm-shorts-lockup-view-model .shortsLockupViewModelHostOutsideMetadataSubhead{font-size:12px !important;color:#aaa !important;}.yt-list-view-enabled ytm-shorts-lockup-view-model .shortsLockupViewModelHostOutsideMetadataMenu{flex-shrink:0 !important;margin-left:12px !important;}";!function(){"use strict";function a(){const t=document.body.classList.toggle("yt-list-view-enabled");e(t);const i=document.getElementById("yt-list-view-toggle");i&&(i.classList.toggle("active",t),i.textContent=t?"â˜° List View":"âŠž Grid View"),t&&o(document.body)}window.location.href.includes("youtube.com/feed/subscriptions")?document.getElementById("yt-list-view-toggle")?console.log("List view toggle already exists"):async function(){console.log("ðŸŽ¬ Initializing YouTube List View..."),function(){if(document.getElementById("yt-list-view-styles"))return;const t=document.createElement("style");t.id="yt-list-view-styles",t.textContent=n,document.head.appendChild(t)}(),await async function(){try{const e=await i('a[href="/feed/channels"]');if(!e)return void console.error('Could not find "All subscriptions" link');const o=document.createElement("button");o.id="yt-list-view-toggle",o.className="yt-list-view-toggle",o.textContent=t()?"â˜° List View":"âŠž Grid View",t()&&o.classList.add("active"),o.addEventListener("click",a);const n=e.closest("#subscribe-button");n?n.insertAdjacentElement("afterend",o):e.parentElement.insertAdjacentElement("afterend",o)}catch(t){console.error("Failed to create toggle button:",t)}}(),t()&&(document.body.classList.add("yt-list-view-enabled"),o(document.body)),function(){const t=new MutationObserver(t=>{if(document.body.classList.contains("yt-list-view-enabled"))for(const e of t)if(e.addedNodes.length>0){o(document.body);break}}),e=document.querySelector("ytd-rich-grid-renderer #contents");e&&t.observe(e,{childList:!0,subtree:!0})}(),console.log("âœ… YouTube List View initialized!")}():alert("This bookmarklet only works on YouTube subscriptions feed!\nNavigate to: https://www.youtube.com/feed/subscriptions")}();